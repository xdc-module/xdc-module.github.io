!function(o){"use strict";o.fn.pickAColor=function(t){var e,a,n,s,r,i,l,d="ontouchstart"in window,c=(parseInt(o(window).width(),10)<767,"localStorage"in window&&null!==window.localStorage&&"object"==typeof JSON),p=document.all&&!window.atob,u=d?"touchstart.pickAColor":"mousedown.pickAColor",h=d?"touchmove.pickAColor":"mousemove.pickAColor",g=d?"touchend.pickAColor":"mouseup.pickAColor",f=d?"touchend.pickAColor":"click.pickAColor",v="dragging.pickAColor",C="endDrag.pickAColor",m=o.extend({showSpectrum:!0,showSavedColors:!0,saveColorsPerElement:!1,fadeMenuToggle:!0,showAdvanced:!0,showBasicColors:!0,showHexInput:!0,allowBlank:!1,inlineDropdown:!1,basicColors:{white:"fff",red:"f00",orange:"f60",yellow:"ff0",green:"008000",blue:"00f",purple:"800080",black:"000"}},t);m.showAdvanced||m.showBasicColors||(m.showBasicColors=!0);e=m.showSavedColors&&m.showAdvanced||m.showBasicColors&&m.showSavedColors||m.showBasicColors&&m.showAdvanced,a=function(){var t,a,n,s,r,i,l,d,c,u,h,g,f,v,C,b,w,S,y,k,x,H,A,B=o("<div>").addClass("input-group-btn"),M=o("<button type='button'>").addClass("btn btn-default color-dropdown dropdown-toggle"),I=o("<span>").addClass("color-preview current-color"),T=o("<span>").addClass("caret"),P=o("<div>").addClass("color-menu dropdown-menu");if(m.inlineDropdown&&P.addClass("color-menu--inline"),m.showHexInput||(M.addClass("no-hex"),P.addClass("no-hex")),B.append(M.append(I).append(T)),e||m.showSpectrum||P.addClass("small"),e){t=o("<div>").addClass("color-menu-tabs"),a=m.showBasicColors?"savedColors-tab tab":"savedColors-tab tab tab-active";m.showBasicColors&&t.append(o("<span>").addClass("basicColors-tab tab tab-active").append(o("<a>").text("Basic Colors"))),m.showSavedColors&&t.append(o("<span>").addClass(a).append(o("<a>").text("Saved Colors"))),m.showAdvanced&&t.append(o("<span>").addClass("advanced-tab tab").append(o("<a>").text("Advanced"))),P.append(t)}if(m.showBasicColors){n=o("<div>").addClass("basicColors-content active-content");m.showSpectrum&&n.append(o("<h6>").addClass("color-menu-instructions").text("Tap spectrum or drag band to change color"));s=o("<ul>").addClass("basic-colors-list");o.each(m.basicColors,function(t,e){var a,n,r=o("<li>").addClass("color-item"),i=o("<a>").addClass(t+" color-link"),l=o("<span>").addClass("color-preview "+t),d=o("<span>").addClass("color-label").text(t);if(i.append(l,d),l.append(),"#"!==e[0]&&(e="#"+e),l.css("background-color",e),m.showSpectrum){a=o("<span>").addClass("color-box spectrum-"+t);p&&o.each([0,1],function(n){"fff"!==e&&"000"!==t&&a.append(o("<span>").addClass(t+"-spectrum-"+n+" ie-spectrum"))});n=o("<span>").addClass("highlight-band");o.each([0,1,2],function(){n.append(o("<span>").addClass("highlight-band-stripe"))}),i.append(a.append(n))}s.append(r.append(i))}),P.append(n.append(s))}if(m.showSavedColors){r=m.showBasicColors?"inactive-content":"active-content",i=o("<div>").addClass("savedColors-content").addClass(r);i.append(o("<p>").addClass("saved-colors-instructions").text("Type in a color or use the spectrums to lighten or darken an existing color.")),P.append(i)}if(m.showAdvanced){l=m.showBasicColors||m.showSavedColors?"inactive-content":"active-content",d=o("<div>").addClass("advanced-content").addClass(l).append(o("<h6>").addClass("advanced-instructions").text("Tap spectrum or drag band to change color")),c=o("<ul>").addClass("advanced-list"),u=o("<li>").addClass("hue-item"),h=o("<span>").addClass("hue-text").text("Hue: ").append(o("<span>").addClass("hue-value").text("0")),g=o("<span>").addClass("color-box spectrum-hue");p&&o.each([0,1,2,3,4,5,6],function(t){g.append(o("<span>").addClass("hue-spectrum-"+t+" ie-spectrum hue"))});f=o("<span>").addClass("highlight-band");o.each([0,1,2],function(){f.append(o("<span>").addClass("highlight-band-stripe"))}),c.append(u.append(h).append(g.append(f)));v=o("<li>").addClass("lightness-item"),C=o("<span>").addClass("color-box spectrum-lightness"),b=o("<span>").addClass("lightness-text").text("Lightness: ").append(o("<span>").addClass("lightness-value").text("50%"));p&&o.each([0,1],function(t){C.append(o("<span>").addClass("lightness-spectrum-"+t+" ie-spectrum"))});w=o("<span>").addClass("highlight-band");o.each([0,1,2],function(){w.append(o("<span>").addClass("highlight-band-stripe"))}),c.append(v.append(b).append(C.append(w)));S=o("<li>").addClass("saturation-item"),y=o("<span>").addClass("color-box spectrum-saturation");p&&o.each([0,1],function(t){y.append(o("<span>").addClass("saturation-spectrum-"+t+" ie-spectrum"))});k=o("<span>").addClass("highlight-band");o.each([0,1,2],function(){k.append(o("<span>").addClass("highlight-band-stripe"))});x=o("<span>").addClass("saturation-text").text("Saturation: ").append(o("<span>").addClass("saturation-value").text("100%"));c.append(S.append(x).append(y.append(k)));H=o("<li>").addClass("preview-item").append(o("<span>").addClass("preview-text").text("Preview")),A=o("<span>").addClass("color-preview advanced").append("<button class='color-select btn btn-mini advanced' type='button'>Select</button>");c.append(H.append(A)),P.append(d.append(c))}return B.append(P),B},n={},s={rowsInDropdown:8,maxColsInDropdown:2};if(m.showSavedColors){r=[];if(c&&localStorage.allSavedColors)r=JSON.parse(localStorage.allSavedColors);else if(document.cookie.match("pickAColorSavedColors-allSavedColors=")){i=document.cookie.split(";");o.each(i,function(o){i[o].match("pickAColorSavedColors-allSavedColors=")&&(r=i[o].split("=")[1].split(","))})}}l={initialize:function(t){var e,s,r=o(this);r.attr("name")||r.attr("name","pick-a-color-"+t),s=r.attr("name"),r.addClass("pick-a-color"),m.allowBlank?r.val().match(/^\s+$|^$/)||(n.defaultColor=tinycolor(r.val()).toHex(),n.typedColor=n.defaultColor,r.val(n.defaultColor)):(n.defaultColor=tinycolor(r.val()).toHex(),n.typedColor=n.defaultColor,r.val(n.defaultColor)),o(r).wrap('<div class="input-group pick-a-color-markup" id="'+s+'">'),e=o(r.parent()),m.showHexInput?e.prepend('<span class="hex-pound input-group-addon">#</span>').append(a()):e.append(a()),m.showHexInput||r.attr("type","hidden")},updatePreview:function(o){m.allowBlank?(n.typedColor=o.val().match(/^\s+$|^$/)?"":tinycolor(o.val()).toHex(),""===n.typedColor?o.siblings(".input-group-btn").find(".current-color").css("background","none"):o.siblings(".input-group-btn").find(".current-color").css("background-color","#"+n.typedColor)):(n.typedColor=tinycolor(o.val()).toHex(),o.siblings(".input-group-btn").find(".current-color").css("background-color","#"+n.typedColor))},pressPreviewButton:function(){var o=arguments[0].thisEvent;o.stopPropagation(),l.toggleDropdown(o.target)},openDropdown:function(t,e){o(".color-menu").each(function(){var t,e=o(this);if("block"===e.css("display")){t=e.parents(".input-group-btn");l.closeDropdown(t,e)}}),m.fadeMenuToggle&&!d?o(e).fadeIn("fast"):o(e).show(),o(t).addClass("open")},closeDropdown:function(t,e){m.fadeMenuToggle&&!d?o(e).fadeOut("fast"):o(e).css("display","none"),o(t).removeClass("open")},closeDropdownIfOpen:function(){var o=arguments[0].button,t=arguments[0].menu;"block"===t.css("display")&&l.closeDropdown(o,t)},toggleDropdown:function(t){var e=o(t).parents(".pick-a-color-markup"),a=e.find("input"),n=e.find(".input-group-btn"),s=e.find(".color-menu");a.is(":disabled")||"none"!==s.css("display")?l.closeDropdown(n,s):l.openDropdown(n,s)},tabbable:function(){var t=o(this),e=t.parents(".pick-a-color-markup");t.click(function(){var t=o(this),a=t.attr("class").split(" ")[0].split("-")[0]+"-content",n=t.parents(".dropdown-menu").find("."+a);t.hasClass("tab-active")||(e.find(".tab-active").removeClass("tab-active"),e.find(".active-content").removeClass("active-content").addClass("inactive-content"),t.addClass("tab-active"),o(n).addClass("active-content").removeClass("inactive-content"))})},getColorMultiplier:function(t,e,a){var n,s,r="basic"===a?parseInt(o(".color-box").first().width(),10):parseInt(o(".advanced-list").find(".color-box").first().width(),10);0===r&&(r="basic"===a?d?160:200:d?160:300);n=r/2,s=e/r;return"bidirectional"===t?.5>=s?(1-e/n)/2:-((e-n)/n)/2:"darkenRight"===t?-(s/2):s/2},modifyHSLLightness:function(o,t){var e=o;return e.l+=t,e.l=Math.min(Math.max(0,e.l),1),tinycolor(e).toHslString()},getMoveableArea:function(o){var t={},e=o.parent(),a=o.outerWidth(),n=e.width(),s=e.offset();return t.minX=s.left,t.maxX=n-a,t},moveHighlightBand:function(t,e,a){var n=o(".highlight-band").first().outerWidth(),s=.75*n,r=d?a.originalEvent.pageX:a.pageX,i=r-e.minX-s;i=Math.max(0,Math.min(i,e.maxX)),t.css("position","absolute"),t.css("left",i)},horizontallyDraggable:function(){o(this).on(u,function(t){var e,a;t.preventDefault();e=o(t.delegateTarget);e.css("cursor","-webkit-grabbing"),e.css("cursor","-moz-grabbing");a=l.getMoveableArea(e);o(document).on(h,function(o){e.trigger(v),l.moveHighlightBand(e,a,o)}).on(g,function(){o(document).off(h),o(document).off(v),e.css("cursor","-webkit-grab"),e.css("cursor","-moz-grab"),e.trigger(C),o(document).off(g)})}).on(g,function(t){t.stopPropagation(),o(document).off(h),o(document).off(v)})},modifyHighlightBand:function(o,t,e){var a={h:0,s:0,l:.05},n={h:0,s:0,l:.5},s=-t,r=o.find(".highlight-band-stripe"),i="lightenRight"===e?l.modifyHSLLightness(n,s):l.modifyHSLLightness(a,s);o.css("border-color",i),r.css("background-color",i)},calculateHighlightedColor:function(){var t,e,a,n,s,r,i,d,c,p,u,h,g,f,v,C,b,w=o(this),S=w.parent(),y=o(".highlight-band").first().outerWidth(),k=y/2,x=arguments[0].type;if("basic"===x){c=S.attr("class").split("-")[2],p=m.basicColors[c];switch(e=tinycolor(p).toHsl(),p){case"fff":t="darkenRight";break;case"000":t="lightenRight";break;default:t="bidirectional"}}else{u=w.parents(".advanced-list");n=arguments[0].hsl.s,i=u.find(".spectrum-hue"),a=arguments[0].hsl.h,r=u.find(".spectrum-saturation"),d=u.find(".lightness-value"),s=u.find(".color-preview"),e={h:arguments[0].hsl.h,l:.5,s:arguments[0].hsl.s},t="bidirectional"}h=parseInt(w.css("left"),10)+k,g=l.getColorMultiplier(t,h,x),f=l.modifyHSLLightness(e,g),v="#"+tinycolor(f).toHex(),C=f.split("(")[1].split(")")[0].split(",")[2],b=parseInt(C.split("%")[0],10)/100;return"basic"===x?(S.siblings(".color-preview").css("background-color",v),S.prev(".color-label").replaceWith('<button class="color-select btn btn-mini" type="button">Select</button>'),"darkenRight"!==t&&l.modifyHighlightBand(w,g,t)):(s.css("background-color",v),d.text(C),l.updateSaturationStyles(r,a,b),l.updateHueStyles(i,n,b),l.modifyHighlightBand(o(".advanced-content .highlight-band"),g,t)),"basic"===x?tinycolor(f).toHex():b},updateSavedColorPreview:function(t){o.each(t,function(e){var a=o(t[e]),n=a.attr("class");a.find(".color-preview").css("background-color",n)})},updateSavedColorMarkup:function(t,e){var a,n,i,d;if(e=e?e:r,m.showSavedColors&&e.length>0){m.saveColorsPerElement||(t=o(".savedColors-content"),e=r);a=s.rowsInDropdown*s.maxColsInDropdown;e=e.slice(0,a);n=o("<ul>").addClass("saved-color-col 0"),i=o("<ul>").addClass("saved-color-col 1");o.each(e,function(t,e){var a=o("<li>").addClass("color-item"),s=o("<a>").addClass(e);s.append(o("<span>").addClass("color-preview")),s.append(o("<span>").addClass("color-label").text(e)),a.append(s),t%2===0?n.append(a):i.append(a)}),t.html(n),t.append(i);d=o(t).find("a");l.updateSavedColorPreview(d)}},setSavedColorsCookie:function(o,t){var e=new Date,a=31536e7,n=new Date(e.getTime()+a);n=n.toGMTString(),document.cookie="undefined"==typeof t?"pickAColorSavedColors-allSavedColors="+o+";expires="+n:"pickAColorSavedColors-"+t+"="+o+"; expires="+n},saveColorsToLocalStorage:function(o,t){if(c)if("undefined"==typeof t)try{localStorage.allSavedColors=JSON.stringify(o)}catch(o){localStorage.clear()}else try{localStorage["pickAColorSavedColors-"+t]=JSON.stringify(o)}catch(o){localStorage.clear()}else l.setSavedColorsCookie(o,t)},removeFromArray:function(t,e){-1!==o.inArray(e,t)&&t.splice(o.inArray(e,t),1)},updateSavedColors:function(o,t,e){l.removeFromArray(t,o),t.unshift(o),l.saveColorsToLocalStorage(t,e)},addToSavedColors:function(o,t,e){if(m.showSavedColors&&void 0!==o)if("#"!=o[0]&&(o="#"+o),l.updateSavedColors(o,r),m.saveColorsPerElement){var a=t.colors,n=t.dataAttr;l.updateSavedColors(o,a,n),l.updateSavedColorMarkup(e,a)}else l.updateSavedColorMarkup(e,r)},selectFromBasicColors:function(){var t=o(this).find("span:first").css("background-color"),e=arguments[0].els,a=arguments[0].savedColorsInfo;t=tinycolor(t).toHex(),o(e.thisEl).val(t),o(e.thisEl).trigger("change"),l.updatePreview(e.thisEl),l.addToSavedColors(t,a,e.savedColorsContent),l.closeDropdown(e.colorPreviewButton,e.colorMenu)},tapSpectrum:function(){var t,e,a,n=arguments[0].thisEvent,s=arguments[0].savedColorsInfo,r=arguments[0].els,i=arguments[0].mostRecentClick;n.stopPropagation();t=o(this).find(".highlight-band"),e=l.getMoveableArea(t);d?l.moveHighlightBand(t,e,i):l.moveHighlightBand(t,e,n);a=l.calculateHighlightedColor.apply(t,[{type:"basic"}]);l.addToSavedColors(a,s,r.savedColorsContent),r.touchInstructions.html("Press 'select' to choose this color")},executeUnlessScrolled:function(){var t,e,a=arguments[0].thisFunction,n=arguments[0].theseArguments;o(this).on(u,function(a){t=o(window).scrollTop(),e=a}).on(f,function(s){var r=t-o(window).scrollTop();return!(d&&Math.abs(r)>0)&&(n.thisEvent=s,n.mostRecentClick=e,void a.apply(o(this),[n]))})},updateSaturationStyles:function(t,e,a){var n,s,r=(100*a).toString()+"%",i="#"+tinycolor("hsl("+e+",0%,"+r).toHex(),l="#"+tinycolor("hsl("+e+",50%,"+r).toHex(),d="#"+tinycolor("hsl("+e+",100%,"+r).toHex(),c="",u=(o.each(["-webkit-linear-gradient","-o-linear-gradient"],function(o,t){c+="background-image: "+t+"(left, "+i+" 0%, "+l+" 50%, "+d+" 100%);"}),"progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+l+"', GradientType=1)"),h="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+l+"', endColorstr='"+d+"', GradientType=1)";if(c="background-image: -moz-linear-gradient(left center, "+i+" 0%, "+l+" 50%, "+d+" 100%);background-image: linear-gradient(to right, "+i+" 0%, "+l+" 50%, "+d+" 100%); background-image: -webkit-gradient(linear, left top, right top,color-stop(0, "+i+"),color-stop(0.5, "+l+"),color-stop(1, "+d+"));"+c,p){n=o(t).find(".saturation-spectrum-0"),s=o(t).find(".saturation-spectrum-1");n.css("filter",u),s.css("filter",h)}else t.attr("style",c)},updateLightnessStyles:function(t,e,a){var n,s,r=(100*a).toString()+"%",i="#"+tinycolor("hsl("+e+","+r+",100%)").toHex(),l="#"+tinycolor("hsl("+e+","+r+",50%)").toHex(),d="#"+tinycolor("hsl("+e+","+r+",0%)").toHex(),c="",u=(o.each(["-webkit-linear-gradient","-o-linear-gradient"],function(o,t){c+="background-image: "+t+"(left, "+i+" 0%, "+l+" 50%, "+d+" 100%);"}),"progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+l+"', GradientType=1)"),h="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+l+"', endColorstr='"+d+"', GradientType=1)";if(c="background-image: -moz-linear-gradient(left center, "+i+" 0%, "+l+" 50%, "+d+" 100%); background-image: linear-gradient(to right, "+i+" 0%, "+l+" 50%, "+d+" 100%); background-image: -webkit-gradient(linear, left top, right top, color-stop(0, "+i+"), color-stop(0.5, "+l+"), color-stop(1, "+d+")); "+c,p){n=o(t).find(".lightness-spectrum-0"),s=o(t).find(".lightness-spectrum-1");n.css("filter",u),s.css("filter",h)}else t.attr("style",c)},updateHueStyles:function(t,e,a){var n,s,r,i,l,d,c=(100*e).toString()+"%",u=(100*a).toString()+"%",h="#"+tinycolor("hsl(0,"+c+","+u+")").toHex(),g="#"+tinycolor("hsl(60,"+c+","+u+")").toHex(),f="#"+tinycolor("hsl(120,"+c+","+u+")").toHex(),v="#"+tinycolor("hsl(180,"+c+","+u+")").toHex(),C="#"+tinycolor("hsl(240,"+c+","+u+")").toHex(),m="#"+tinycolor("hsl(300,"+c+","+u+")").toHex(),b="#"+tinycolor("hsl(0,"+c+","+u+")").toHex(),w="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+h+"', endColorstr='"+g+"', GradientType=1)",S="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+g+"', endColorstr='"+f+"', GradientType=1)",y="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+f+"', endColorstr='"+v+"', GradientType=1)",k="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+v+"', endColorstr='"+C+"', GradientType=1)",x="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+C+"', endColorstr='"+m+"', GradientType=1)",H="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+m+"', endColorstr='"+b+"', GradientType=1)",A="";o.each(["-webkit-linear-gradient","-o-linear-gradient"],function(o,t){A+="background-image: "+t+"(left, "+h+" 0%, "+g+" 17%, "+f+" 24%, "+v+" 51%, "+C+" 68%, "+m+" 85%, "+b+" 100%);"});if(A+="background-image: -webkit-gradient(linear, left top, right top,color-stop(0%, "+h+"),color-stop(17%, "+g+"),color-stop(34%, "+f+"),color-stop(51%, "+v+"),color-stop(68%, "+C+"),color-stop(85%, "+m+"),color-stop(100%, "+b+"));background-image: linear-gradient(to right, "+h+" 0%, "+g+" 17%, "+f+" 24%,"+v+" 51%,"+C+" 68%,"+m+" 85%,"+b+" 100%); background-image: -moz-linear-gradient(left center, "+h+" 0%, "+g+" 17%, "+f+" 24%, "+v+" 51%, "+C+" 68%, "+m+" 85%, "+b+" 100%);",p){n=o(t).find(".hue-spectrum-0"),s=o(t).find(".hue-spectrum-1"),r=o(t).find(".hue-spectrum-2"),i=o(t).find(".hue-spectrum-3"),l=o(t).find(".hue-spectrum-4"),d=o(t).find(".hue-spectrum-5");n.css("filter",w),s.css("filter",S),r.css("filter",y),i.css("filter",k),l.css("filter",x),d.css("filter",H)}else t.attr("style",A)},getHighlightedHue:function(){var t,e,a=o(this),n=a.outerWidth(),s=n/2,r=parseInt(a.css("left"),10)+s,i=a.parents(".advanced-list"),c=i.find(".color-preview"),p=i.find(".spectrum-lightness"),u=i.find(".spectrum-saturation"),h=parseInt(i.find(".color-box").first().width(),10),g=i.find(".hue-value"),f=arguments[0].l,v=arguments[0].s,C=(100*v).toString()+"%",m=(100*f).toString()+"%";0===h&&(h=d?160:300);t=Math.floor(r/h*360),e="hsl("+t+","+C+","+m+")";return e="#"+tinycolor(e).toHex(),c.css("background-color",e),g.text(t),l.updateLightnessStyles(p,t,v),l.updateSaturationStyles(u,t,f),t},getHighlightedSaturation:function(){var t,e,a,n=o(this),s=n.outerWidth(),r=s/2,i=parseInt(n.css("left"),10)+r,c=n.parents(".advanced-list"),p=c.find(".color-preview"),u=c.find(".spectrum-lightness"),h=c.find(".spectrum-hue"),g=c.find(".saturation-value"),f=parseInt(c.find(".color-box").first().width(),10),v=arguments[0].l,C=(100*v).toString()+"%",m=arguments[0].h;0===f&&(f=d?160:300);t=i/f,e=Math.round(100*t).toString()+"%",a="hsl("+m+","+e+","+C+")";return a="#"+tinycolor(a).toHex(),p.css("background-color",a),g.text(e),l.updateLightnessStyles(u,m,t),l.updateHueStyles(h,t,v),t},updateAdvancedInstructions:function(o){o.html("Press the color preview to choose this color")}};return this.each(function(t){var a,s,i,d,p;l.initialize.apply(this,[t]);i={thisEl:o(this),thisWrapper:o(this).parent(),colorTextInput:o(this).find("input"),colorMenuLinks:o(this).parent().find(".color-menu li a"),colorPreviewButton:o(this).parent().find(".input-group-btn"),colorMenu:o(this).parent().find(".color-menu"),colorSpectrums:o(this).parent().find(".color-box"),basicSpectrums:o(this).parent().find(".basicColors-content .color-box"),touchInstructions:o(this).parent().find(".color-menu-instructions"),advancedInstructions:o(this).parent().find(".advanced-instructions"),highlightBands:o(this).parent().find(".highlight-band"),basicHighlightBands:o(this).parent().find(".basicColors-content .highlight-band")};if(e&&(i.tabs=i.thisWrapper.find(".tab")),m.showSavedColors&&(i.savedColorsContent=i.thisWrapper.find(".savedColors-content"),m.saveColorsPerElement))if(s={colors:[],dataObj:o(this).data()},o.each(s.dataObj,function(o){s.dataAttr=o}),c&&localStorage["pickAColorSavedColors-"+s.dataAttr])s.colors=JSON.parse(localStorage["pickAColorSavedColors-"+s.dataAttr]);else if(document.cookie.match("pickAColorSavedColors-"+s.dataAttr))for(d=document.cookie.split(";"),p=0;p<d.length;p++)d[p].match(s.dataAttr)&&(s.colors=d[p].split("=")[1].split(","));else s.colors=r;m.showAdvanced&&(a={h:0,s:1,l:.5},i.advancedSpectrums=i.thisWrapper.find(".advanced-list").find(".color-box"),i.advancedHighlightBands=i.thisWrapper.find(".advanced-list").find(".highlight-band"),i.hueSpectrum=i.thisWrapper.find(".spectrum-hue"),i.lightnessSpectrum=i.thisWrapper.find(".spectrum-lightness"),i.saturationSpectrum=i.thisWrapper.find(".spectrum-saturation"),i.hueHighlightBand=i.thisWrapper.find(".spectrum-hue .highlight-band"),i.lightnessHighlightBand=i.thisWrapper.find(".spectrum-lightness .highlight-band"),i.saturationHighlightBand=i.thisWrapper.find(".spectrum-saturation .highlight-band"),i.advancedPreview=i.thisWrapper.find(".advanced-content .color-preview")),l.addToSavedColors(n.defaultColor,s,i.savedColorsContent),l.updatePreview(i.thisEl),i.thisEl.focus(function(){var t=o(this);n.typedColor=t.val(),m.allowBlank||t.val(""),l.toggleDropdown(i.colorPreviewButton,i.ColorMenu)}).blur(function(){var t=o(this);n.newValue=t.val(),n.newValue.match(/^\s+$|^$/)?m.allowBlank||t.val(n.typedColor):(n.newValue=tinycolor(n.newValue).toHex(),t.val(n.newValue),l.addToSavedColors(n.newValue,s,i.savedColorsContent)),l.toggleDropdown(i.colorPreviewButton,i.ColorMenu),l.updatePreview(t)}),l.executeUnlessScrolled.apply(i.colorPreviewButton,[{thisFunction:l.pressPreviewButton,theseArguments:{}}]),l.executeUnlessScrolled.apply(o(document),[{thisFunction:l.closeDropdownIfOpen,theseArguments:{button:i.colorPreviewButton,menu:i.colorMenu}}]),i.colorMenu.on(f,function(o){o.stopPropagation()}),i.thisEl.on(f,function(o){o.stopPropagation()}),l.executeUnlessScrolled.apply(i.colorMenuLinks,[{thisFunction:l.selectFromBasicColors,theseArguments:{els:i,savedColorsInfo:s}}]),e&&l.tabbable.apply(i.tabs),(m.showSpectrum||m.showAdvanced)&&l.horizontallyDraggable.apply(i.highlightBands),m.showSpectrum&&(l.executeUnlessScrolled.apply(i.basicSpectrums,[{thisFunction:l.tapSpectrum,theseArguments:{savedColorsInfo:s,els:i}}]),o(i.basicHighlightBands).on(v,function(o){o.target;l.calculateHighlightedColor.apply(this,[{type:"basic"}])}).on(C,function(o){var t=o.delegateTarget,e=l.calculateHighlightedColor.apply(t,[{type:"basic"}]);l.addToSavedColors(e,s,i.savedColorsContent)})),m.showAdvanced&&(o(i.hueHighlightBand).on(v,function(){a.h=l.getHighlightedHue.apply(this,[a])}),o(i.lightnessHighlightBand).on(v,function(){l.calculateHighlightedColor.apply(this,[{type:"advanced",hsl:a}])}).on(g,function(){a.l=l.calculateHighlightedColor.apply(this,[{type:"advanced",hsl:a}])}),o(i.saturationHighlightBand).on(v,function(){l.getHighlightedSaturation.apply(this,[a])}).on(C,function(){a.s=l.getHighlightedSaturation.apply(this,[a])}),o(i.advancedHighlightBand).on(C,function(){l.updateAdvancedInstructions(i.advancedInstructions)}),o(i.lightnessSpectrum).click(function(t){t.stopPropagation();var e=o(this).find(".highlight-band"),n=l.getMoveableArea(e);l.moveHighlightBand(e,n,t),a.l=l.calculateHighlightedColor.apply(e,[{type:"advanced",hsl:a}])}),o(i.hueSpectrum).click(function(t){t.stopPropagation();var e=o(this).find(".highlight-band"),n=l.getMoveableArea(e);l.moveHighlightBand(e,n,t),a.h=l.getHighlightedHue.apply(e,[a])}),o(i.saturationSpectrum).click(function(t){t.stopPropagation();var e=o(this).find(".highlight-band"),n=l.getMoveableArea(e);l.moveHighlightBand(e,n,t),a.s=l.getHighlightedSaturation.apply(e,[a])}),o(i.advancedSpectrums).click(function(){l.updateAdvancedInstructions(i.advancedInstructions)}),o(i.advancedPreview).click(function(){var t=tinycolor(o(this).css("background-color")).toHex();o(i.thisEl).val(t),o(i.thisEl).trigger("change"),l.updatePreview(i.thisEl),l.addToSavedColors(t,s,i.savedColorsContent),l.closeDropdown(i.colorPreviewButton,i.colorMenu)})),m.showSavedColors&&(o(i.savedColorsContent).click(function(t){var e,a=o(t.target);if(a.is("SPAN")||a.is("A")){e=a.is("SPAN")?a.parent().attr("class").split("#")[1]:a.attr("class").split("#")[1];o(i.thisEl).val(e),o(i.thisEl).trigger("change"),l.updatePreview(i.thisEl),l.closeDropdown(i.colorPreviewButton,i.colorMenu),l.addToSavedColors(e,s,i.savedColorsContent)}}),m.saveColorsPerElement?m.saveColorsPerElement&&l.updateSavedColorMarkup(i.savedColorsContent,s.colors):l.updateSavedColorMarkup(i.savedColorsContent,r))})}}(jQuery);